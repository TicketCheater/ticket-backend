# 대기열을 Redis 로 구현한 이유

## Redis vs Kafka
- Redis
  - Redis 는 DB, 해시, 캐시, 메시지 브로커로 사용되는 인메모리 데이터 구조 저장소다.
  - 문자열, 해시, 리스트, 셋, 정렬된 셋 등 다양한 데이터 구조를 지원하며 인메모리 특성으로 인해 높은 성능을 제공한다.
- Kafka
  - Apache Kafka 는 하루의 수조 개의 이벤트를 처리할 수 있는 분산 이벤트 스트리밍 플랫폼이다.
  - 높은 처리량과 내결함성을 위해 설계되어 실시간 데이터 파이프라인 및 스트리밍 애플리케이션 구축에 적합하다.

## Redis 선택 이유
- 저지연 및 고처리량: Redis 는 매우 낮은 지연 시간과 높은 처리량으로 유명하다. 티켓 대기열 서비스는 시간이 중요하다.
- 단순성과 사용 용이성: Redis 는 데이터 구조를 관리하기 위한 간단한 API 를 제공하여 대기열 작업 구현을 단순화한다. ZSet 을 사용하여 대기열에서 멤버의 순서를 유지하여, 효율적인 순위 지정 및 회원 조회 기능을 제공한다.
- 인메모리 저장: Redis 는 데이터를 메모리에 저장하여 데이터 접근 속도를 크게 향상시킨다. 대기열 데이터의 빠른 접근 및 수정이 중요한 서비스에서 Redis 의 인메모리 저장 모델은 디스크 I/O 오버헤드 없이 빠른 처리를 보장한다.
- 내장된 스케줄링: 해당 서비스에서는 대기열에서 대기 중인 회원을 주기적으로 처리하는 스케줄된 작업이 포함되어 있다. Redis 는 대량의 데이터를 인메모리에서 효율적으로 스캔하고 조작할 수 있다.
- 리액티브 프로그래밍 지원: WebFlux 같은 리액티브 프로그래밍 모델을 위하여 `ReactiveRedisTemplate` 과 같은 라이브러리를 통해 강력한 리액티브 연산 지원을 제공한다.
- 자원 효율성: Redis 는 인메모리 작업에 대해 매우 자원 효율적이다. 해당 서비스에서 Redis 의 효율적인 메모리 관리를 통해 최소한의 자원 소비로 대량의 대기열 작업을 처리할 수 있다.

## 고려사항 및 트레이드오프
- Kafka 의 강점과 필요한 이유
  - 고처리량 및 확장성: Kafka 는 높은 처리량과 확장성에서 뛰어나지만, 이러한 특성은 이벤트 스트리밍 및 로그 집계에 더 적합하다.
  - 내구성 및 내결함성: Kafka 는 강력한 내구성 보장과 내결함성을 제공하지만, 이는 장기적인 이벤트 데이터에 중요하다.
- Redis 사용의 잠재적 단점
  - 메모리 제한: Redis 의 인메모리 모델은 사용 가능한 RAM 에 의해 제한된다. 매우 큰 데이터셋의 경우 이는 한계가 될 수 있다.
  - 네이티브 고가용성 부족: Redis Sentinel 이나 Redis Cluster 는 고가용성을 제공하지만, Kafka 에 비해 설정 및 관리가 복잡하다.
